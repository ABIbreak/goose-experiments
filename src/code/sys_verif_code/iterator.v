(* autogenerated from sys_verif_code/iterator *)

From New.golang Require Import defn.
Definition iterator : go_string := "sys_verif_code/iterator".

Module iterator.

Section code.
Context `{ffi_syntax}.


Definition intIter : go_string := "sys_verif_code/iterator.intIter"%go.

(* go: intIter.go:13:6 *)
Definition intIterⁱᵐᵖˡ : val :=
  λ: "limit",
    exception_do (let: "limit" := (mem.alloc "limit") in
    return: ((λ: "yield",
       exception_do (let: "yield" := (mem.alloc "yield") in
       (let: "i" := (mem.alloc (type.zero_val #intT)) in
       let: "$r0" := #(W64 0) in
       do:  ("i" <-[#intT] "$r0");;;
       (for: (λ: <>, int_lt (![#intT] "i") (![#intT] "limit")); (λ: <>, do:  ("i" <-[#intT] ((![#intT] "i") + #(W64 1)))) := λ: <>,
         (if: (~ (let: "$a0" := (![#intT] "i") in
         (![#funcT] "yield") "$a0"))
         then return: (#())
         else do:  #())));;;
       return: #())
       ))).

Definition bozo : go_string := "sys_verif_code/iterator.bozo"%go.

(* go: intIter.go:36:6 *)
Definition bozoⁱᵐᵖˡ : val :=
  λ: "i",
    exception_do (let: "i" := (mem.alloc "i") in
    return: (int_gt (![#intT] "i") #(W64 6))).

Definition main : go_string := "sys_verif_code/iterator.main"%go.

(* go: intIter.go:40:6 *)
Definition mainⁱᵐᵖˡ : val :=
  λ: <>,
    exception_do (do:  (let: "$a0" := (func_call #bozo) in
    (let: "$a0" := #(W64 5) in
    (func_call #intIter) "$a0") "$a0");;;
    return: #()).

Definition vars' : list (go_string * go_type) := [].

Definition functions' : list (go_string * val) := [(intIter, intIterⁱᵐᵖˡ); (bozo, bozoⁱᵐᵖˡ); (main, mainⁱᵐᵖˡ)].

Definition msets' : list (go_string * (list (go_string * val))) := [].

#[global] Instance info' : PkgInfo iterator.iterator :=
  {|
    pkg_vars := vars';
    pkg_functions := functions';
    pkg_msets := msets';
    pkg_imported_pkgs := [];
  |}.

Definition initialize' : val :=
  λ: <>,
    package.init #iterator.iterator (λ: <>,
      exception_do (do:  (package.alloc iterator.iterator #()))
      ).

End code.
End iterator.
